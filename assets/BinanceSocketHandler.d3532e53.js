import{G as o}from"./GenericSocketHandler.d4f321a3.js";import t from"./SocketHandlers.0ffd5406.js";class c extends o{provider=t.BINANCE;constructor(){super(),this.socket=new WebSocket("wss://stream.binance.com:443/ws"),this.socket.onopen=e=>{console.debug(`Socket with ${this.provider} opened`,e)},this.socket.onmessage=e=>{console.debug(`message from ${this.provider}`,e);const s=JSON.parse(e.data);this.isRelevant(s)&&postMessage(this.getFormattedPriceUpdate(s))}}subscribe(e){const s=JSON.stringify({method:"SUBSCRIBE",params:[`${e.toLowerCase()}@bookTicker`],id:1});console.debug(`Subscribing to ${e}@bookTicker on ${this.provider}`),this.socket.send(s)}unsubscribe(e){const s=JSON.stringify({method:"UNSUBSCRIBE",params:[`${e.toLowerCase()}@bookTicker`],id:1});console.debug(`Subscribing to ${e}@bookTicker on ${this.provider}`),this.socket.send(s)}isRelevant(e){return e.s!==void 0}isUpdateDue(e){return!0}getFormattedPriceUpdate(e){return{symbol:e.s,provider:this.provider,bid:e.b,ask:e.a}}}export{c as default};
