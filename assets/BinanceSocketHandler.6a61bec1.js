import{G as i,S as t}from"./SocketHandlers.2ad7bd45.js";class n extends i{constructor(e){super(e),this.publishUpdate=e,this.socket=new WebSocket("wss://stream.binance.com:443/ws"),this.socket.onopen=s=>{console.debug(`Socket with ${this.provider} opened`,s)},this.socket.onmessage=s=>{console.debug(`message from ${this.provider}`,s);const o=JSON.parse(s.data);this.isRelevant(o)&&this.updateBestPrice(o)}}provider=t.BINANCE;subscribe(e){const s=JSON.stringify({method:"SUBSCRIBE",params:[`${e.toLowerCase()}@bookTicker`],id:1});console.debug(`Subscribing to ${e}@bookTicker on ${this.provider}`),this.socket.send(s)}unsubscribe(e){const s=JSON.stringify({method:"UNSUBSCRIBE",params:[`${e.toLowerCase()}@bookTicker`],id:1});console.debug(`Subscribing to ${e}@bookTicker on ${this.provider}`),this.socket.send(s)}isRelevant(e){return e.s!==void 0}updateBestPrice(e){this.bestPrices[e.s]={symbol:e.s,provider:this.provider,bid:e.b,ask:e.a}}}export{n as default};
